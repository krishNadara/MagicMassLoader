<template>

        <lightning-card variant="Narrow"  title="Magic Mass Loader" icon-name="standard:account">
            <div class="main">
                <template if:true={objectsAllowed}>
                    <lightning-combobox
                        name="Object"
                        label="Object"
                        value={value}
                        placeholder="Select an Object"
                        options={objectsAllowed}
                        onchange={handleChange}
                        class="inputObjects" >
                    </lightning-combobox>
                </template>

                <lightning-input type="file" 
                                    label="Attachment" 
                                    required 
                                    message-when-value-missing="Please upload a file"
                                    onchange={cacheUploadData}
                                    accept=".txt, .csv"
                >
                </lightning-input>

                <template if:true={loading}>
                    <p>Loading</p>
                    <lightning-progress-ring value={progress} variant="active-step"> </lightning-progress-ring>
                </template>

                <template if:true={uploadData}>
                    <div class="dataSummary">
                        <p class="fileSummaryLabel">File Summary</p>
                        <p>{uploadData.filename}</p>
                        <p>Num of lines : {uploadData.numOfLines}</p>
                        <p>&nbsp;</p>
                    </div>

                    <template if:true={startRolling}>
                        <lightning-button label="Start Rolling" title="Start Rolling" onclick={startUpload} class="slds-m-left_x-small"></lightning-button>
                    </template>
                </template>

                <template if:true={loadResult}>
                    <div class="uploadSummary">
                        <p class="fileSummaryLabel">Records Processed : {loadResult.linesProcessed}</p>
                        <p>Success : {loadResult.numSuccess}</p>
                        <p>Errors : {loadResult.numFailure}</p>
                        <p>&nbsp;</p>
                    </div>
                </template>
            </div>
        </lightning-card>

</template>